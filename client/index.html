<!DOCTYPE html>
<html>
<head>
  <title>Drawing</title>
<script type="text/javascript" src="paper-full.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="http://connect.soundcloud.com/sdk.js"></script>
<link rel="stylesheet" type="text/css" href="MyFontsWebfontsKit.css">
<link rel="stylesheet" type="text/css" href="css/main.css">
</head>
<body>

<script type="text/javascript">
	var host = location.origin.replace(/^http/, 'ws')
	//
	// Initiate socket.io
	var socket = new WebSocket(host);
	
	 SC.initialize({
             client_id: 'a2befdf458b195d9dc90a309e9015eb4'
       });


$( document ).ready(function() {
	
	
	
	socket.on('bdInfo', function(data) {
		
		var windowWidth = ($(window).width())/2;
		var windowHeight = ($(window).height())/2;
		
		var xPosition = Math.floor(1 + Math.random() * windowWidth);
		var yPosition = Math.floor(1 + Math.random() * windowHeight);
		
		
		$("#svgDisplay").append("<img style='' data-background="+data.background+" data-track="+data.trackLink+" src='"+data.dataURLInfo+"' />");
		
	
	});
	
	

	
	 $('#svgDisplay').on("mouseover", "img", function() {
	 		$( this ).css( "z-index", "10000" );
	 	});
	 	$('#svgDisplay').on("mouseleave", "img", function() {
	 		$( this ).css( "z-index", "1" );
	 	});
		
		
		
		$(window).resize(function (){
	        $('#svgDisplay').css({
	            position:'absolute',
	            left: (($(window).width() - $('#svgDisplay').outerWidth())/2)
	        });
	    });
	    $(window).resize();
		
			$('#svgDisplay').on('mouseenter', "img", function() {
				var trackToPlay = $(this).data("track");
				var theImgTag = $(this);

					SC.stream(trackToPlay, function(sound){
						 sound.play();
 	 					theImgTag.mouseleave(function(){
	 							sound.pause();
						});
					  		
						 
						
					
						
					});
			});
    });
	
	
</script>

	<div id="svgDisplay"></div>
	<nav><span id='archive'>Archive</span><span id="drawCanvas"><a href="draw.html">Draw</a></span></nav>
	<div id="track_test"></div>
</body>
</html>